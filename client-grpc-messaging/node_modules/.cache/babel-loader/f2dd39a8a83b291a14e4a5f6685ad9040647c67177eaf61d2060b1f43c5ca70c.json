{"ast":null,"code":"\"use strict\";\n\n/*\n * Copyright 2020 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.uriToString = exports.combineHostPort = exports.splitHostPort = exports.parseUri = void 0;\n/*\n * The groups correspond to URI parts as follows:\n * 1. scheme\n * 2. authority\n * 3. path\n */\nconst URI_REGEX = /^(?:([A-Za-z0-9+.-]+):)?(?:\\/\\/([^/]*)\\/)?(.+)$/;\nfunction parseUri(uriString) {\n  const parsedUri = URI_REGEX.exec(uriString);\n  if (parsedUri === null) {\n    return null;\n  }\n  return {\n    scheme: parsedUri[1],\n    authority: parsedUri[2],\n    path: parsedUri[3]\n  };\n}\nexports.parseUri = parseUri;\nconst NUMBER_REGEX = /^\\d+$/;\nfunction splitHostPort(path) {\n  if (path.startsWith('[')) {\n    const hostEnd = path.indexOf(']');\n    if (hostEnd === -1) {\n      return null;\n    }\n    const host = path.substring(1, hostEnd);\n    /* Only an IPv6 address should be in bracketed notation, and an IPv6\n     * address should have at least one colon */\n    if (host.indexOf(':') === -1) {\n      return null;\n    }\n    if (path.length > hostEnd + 1) {\n      if (path[hostEnd + 1] === ':') {\n        const portString = path.substring(hostEnd + 2);\n        if (NUMBER_REGEX.test(portString)) {\n          return {\n            host: host,\n            port: +portString\n          };\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    } else {\n      return {\n        host\n      };\n    }\n  } else {\n    const splitPath = path.split(':');\n    /* Exactly one colon means that this is host:port. Zero colons means that\n     * there is no port. And multiple colons means that this is a bare IPv6\n     * address with no port */\n    if (splitPath.length === 2) {\n      if (NUMBER_REGEX.test(splitPath[1])) {\n        return {\n          host: splitPath[0],\n          port: +splitPath[1]\n        };\n      } else {\n        return null;\n      }\n    } else {\n      return {\n        host: path\n      };\n    }\n  }\n}\nexports.splitHostPort = splitHostPort;\nfunction combineHostPort(hostPort) {\n  if (hostPort.port === undefined) {\n    return hostPort.host;\n  } else {\n    // Only an IPv6 host should include a colon\n    if (hostPort.host.includes(':')) {\n      return `[${hostPort.host}]:${hostPort.port}`;\n    } else {\n      return `${hostPort.host}:${hostPort.port}`;\n    }\n  }\n}\nexports.combineHostPort = combineHostPort;\nfunction uriToString(uri) {\n  let result = '';\n  if (uri.scheme !== undefined) {\n    result += uri.scheme + ':';\n  }\n  if (uri.authority !== undefined) {\n    result += '//' + uri.authority + '/';\n  }\n  result += uri.path;\n  return result;\n}\nexports.uriToString = uriToString;","map":{"version":3,"names":["URI_REGEX","parseUri","uriString","parsedUri","exec","scheme","authority","path","exports","NUMBER_REGEX","splitHostPort","startsWith","hostEnd","indexOf","host","substring","length","portString","test","port","splitPath","split","combineHostPort","hostPort","undefined","includes","uriToString","uri","result"],"sources":["/Users/husseinmohamed/Desktop/Learn_Rust/projects/grpc-project/client-grpc-messaging/node_modules/@grpc/grpc-js/src/uri-parser.ts"],"sourcesContent":["/*\n * Copyright 2020 gRPC authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nexport interface GrpcUri {\n  scheme?: string;\n  authority?: string;\n  path: string;\n}\n\n/*\n * The groups correspond to URI parts as follows:\n * 1. scheme\n * 2. authority\n * 3. path\n */\nconst URI_REGEX = /^(?:([A-Za-z0-9+.-]+):)?(?:\\/\\/([^/]*)\\/)?(.+)$/;\n\nexport function parseUri(uriString: string): GrpcUri | null {\n  const parsedUri = URI_REGEX.exec(uriString);\n  if (parsedUri === null) {\n    return null;\n  }\n  return {\n    scheme: parsedUri[1],\n    authority: parsedUri[2],\n    path: parsedUri[3],\n  };\n}\n\nexport interface HostPort {\n  host: string;\n  port?: number;\n}\n\nconst NUMBER_REGEX = /^\\d+$/;\n\nexport function splitHostPort(path: string): HostPort | null {\n  if (path.startsWith('[')) {\n    const hostEnd = path.indexOf(']');\n    if (hostEnd === -1) {\n      return null;\n    }\n    const host = path.substring(1, hostEnd);\n    /* Only an IPv6 address should be in bracketed notation, and an IPv6\n     * address should have at least one colon */\n    if (host.indexOf(':') === -1) {\n      return null;\n    }\n    if (path.length > hostEnd + 1) {\n      if (path[hostEnd + 1] === ':') {\n        const portString = path.substring(hostEnd + 2);\n        if (NUMBER_REGEX.test(portString)) {\n          return {\n            host: host,\n            port: +portString,\n          };\n        } else {\n          return null;\n        }\n      } else {\n        return null;\n      }\n    } else {\n      return {\n        host,\n      };\n    }\n  } else {\n    const splitPath = path.split(':');\n    /* Exactly one colon means that this is host:port. Zero colons means that\n     * there is no port. And multiple colons means that this is a bare IPv6\n     * address with no port */\n    if (splitPath.length === 2) {\n      if (NUMBER_REGEX.test(splitPath[1])) {\n        return {\n          host: splitPath[0],\n          port: +splitPath[1],\n        };\n      } else {\n        return null;\n      }\n    } else {\n      return {\n        host: path,\n      };\n    }\n  }\n}\n\nexport function combineHostPort(hostPort: HostPort): string {\n  if (hostPort.port === undefined) {\n    return hostPort.host;\n  } else {\n    // Only an IPv6 host should include a colon\n    if (hostPort.host.includes(':')) {\n      return `[${hostPort.host}]:${hostPort.port}`;\n    } else {\n      return `${hostPort.host}:${hostPort.port}`;\n    }\n  }\n}\n\nexport function uriToString(uri: GrpcUri): string {\n  let result = '';\n  if (uri.scheme !== undefined) {\n    result += uri.scheme + ':';\n  }\n  if (uri.authority !== undefined) {\n    result += '//' + uri.authority + '/';\n  }\n  result += uri.path;\n  return result;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}